# 顔認識・年齢推定システム

リアルタイムで顔を認識し、年齢を推定するWebアプリケーションです。

## 機能

- **リアルタイム顔認識**: カメラから取得した映像から顔を検出・認識
- **年齢推定**: 検出された顔の年齢を推定
- **モダンなWeb UI**: レスポンシブデザインの美しいインターフェース
- **設定調整**: 認識閾値のリアルタイム調整
- **統計表示**: FPS、検出された顔数などの統計情報

## セットアップ

### 1. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 2. 画像データの準備

`images`フォルダに認識したい人物のフォルダを作成し、その中に顔写真（.jpg形式）を配置してください。

```
images/
├── person1/
│   ├── photo1.jpg
│   └── photo2.jpg
└── person2/
    └── photo1.jpg
```

### 3. アプリケーションの起動

```bash
python app.py
```

ブラウザで `http://localhost:5000` にアクセスしてください。

## 使用方法

1. **カメラ開始**: 「カメラ開始」ボタンをクリックしてカメラを起動
2. **設定調整**: 右側のパネルで認識閾値を調整（0.1〜1.0）
3. **結果確認**: 検出された顔の認識結果と年齢推定結果を確認
4. **カメラ停止**: 「カメラ停止」ボタンでカメラを停止

## UIの特徴

### メイン画面
- **ビデオセクション**: リアルタイムカメラフィードの表示
- **コントロールボタン**: カメラの開始/停止
- **ステータス表示**: カメラの動作状態を視覚的に表示

### サイドバー
- **設定パネル**: 認識閾値の調整、統計情報の表示
- **認識結果パネル**: 検出された顔の詳細情報

### レスポンシブデザイン
- デスクトップとモバイルデバイスに対応
- 美しいグラデーションとアニメーション効果
- 直感的なユーザーインターフェース

## 技術仕様

- **バックエンド**: Flask (Python)
- **フロントエンド**: HTML5, CSS3, JavaScript
- **顔認識**: face_recognition ライブラリ
- **年齢推定**: OpenCV DNN (Caffeモデル)
- **リアルタイム処理**: WebSocket風のストリーミング

## ファイル構成

```
project7/
├── app.py                 # メインアプリケーション
├── requirements.txt       # 依存関係
├── templates/
│   └── index.html        # メインHTMLテンプレート
├── static/               # 静的ファイル（CSS、JS等）
├── images/               # 認識用画像データ
│   ├── person1/
│   └── person2/
└── model/                # 年齢推定モデル
    ├── deploy_age.prototxt
    └── age_net.caffemodel
```

## 注意事項

- カメラの使用にはブラウザの許可が必要です
- 初回起動時は画像データの読み込みに時間がかかる場合があります
- 認識精度は画像の品質と照明条件に依存します

## トラブルシューティング

### カメラが起動しない場合
- ブラウザでカメラの許可がされているか確認
- 他のアプリケーションでカメラを使用していないか確認

### 認識精度が低い場合
- 認識閾値を調整（0.3〜0.5が推奨）
- 画像データの品質を向上
- 照明条件を改善

### パフォーマンスが低い場合
- ブラウザを最新版に更新
- 他のアプリケーションを終了
- 処理フレーム数を調整（app.pyのskip_frames変数）
